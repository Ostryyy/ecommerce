import{B as T,D as A,E as R,F as w,H as M,J as x,K as j,L as O,O as $,R as z,S as H,s as V,u as s,w as k,x as b,y as I}from"./chunk-TV45IYTT.js";import{a as E}from"./chunk-A55XAJPQ.js";import{Ca as p,Da as c,Ea as S,Ga as y,Ha as _,Ia as u,Ja as o,Ka as a,La as f,M as m,Qc as F,Sa as h,Ua as g,Uc as D,Xb as P,Zb as N,fa as r,gb as l,hb as v,ib as U,ma as G,nb as B,qa as d}from"./chunk-XXRY7TDU.js";function X(t,e){if(t&1&&(o(0,"mat-error"),l(1),a()),t&2){let i=g();r(),U(" ",i.label," is required. ")}}function Y(t,e){t&1&&(o(0,"mat-error"),l(1," Email is invalid. "),a())}var C=class t{constructor(e){this.controlDir=e;this.controlDir.valueAccessor=this}label="";type="text";writeValue(e){}registerOnChange(e){}registerOnTouched(e){}get control(){return this.controlDir.control}static \u0275fac=function(i){return new(i||t)(G(k,2))};static \u0275cmp=d({type:t,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:6,vars:8,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(i,n){i&1&&(o(0,"mat-form-field",0)(1,"mat-label"),l(2),a(),f(3,"input",1),p(4,X,2,1,"mat-error"),p(5,Y,2,0,"mat-error"),a()),i&2&&(r(2),v(n.label),r(),u("type",B(n.type))("placeholder",B(n.label))("formControl",n.control),r(),c(n.control.hasError("required")?4:-1),r(),c(n.control.hasError("email")?5:-1))},dependencies:[x,V,b,A,$,z,O,j],encapsulation:2})};function Z(t,e){if(t&1&&(o(0,"li"),l(1),a()),t&2){let i=e.$implicit;r(),v(i)}}function tt(t,e){if(t&1&&(o(0,"div",6)(1,"ul",8),y(2,Z,2,1,"li",null,S),a()()),t&2){let i=g();r(2),_(i.validationErrors)}}var L=class t{fb=m(M);accountService=m(D);router=m(N);validationErrors;activatedRoute=m(P);returnUrl="/shop";loginForm=this.fb.group({email:["",[s.required,s.email]],password:["",s.required]});constructor(){let e=this.activatedRoute.snapshot.queryParams.returnUrl;e&&(this.returnUrl=e)}onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(),this.router.navigateByUrl(this.returnUrl)},error:e=>this.validationErrors=e})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=d({type:t,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","Email","formControlName","email","type","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","",1,"w-full","py-2"],[1,"list-disc","px-3"]],template:function(i,n){i&1&&(o(0,"mat-card",0)(1,"form",1),h("ngSubmit",function(){return n.onSubmit()}),o(2,"div",2)(3,"h1",3),l(4,"Login"),a()(),f(5,"app-text-input",4)(6,"app-text-input",5),p(7,tt,4,0,"div",6),o(8,"button",7),l(9,"Sign in"),a()()()),i&2&&(r(),u("formGroup",n.loginForm),r(6),c(n.validationErrors?7:-1))},dependencies:[x,T,b,I,R,w,E,F,C],encapsulation:2})};function et(t,e){if(t&1&&(o(0,"li"),l(1),a()),t&2){let i=e.$implicit;r(),v(i)}}function it(t,e){if(t&1&&(o(0,"div",8)(1,"ul",10),y(2,et,2,1,"li",null,S),a()()),t&2){let i=g();r(2),_(i.validationErrors)}}var q=class t{fb=m(M);accountService=m(D);router=m(N);snack=m(H);validationErrors;registerForm=this.fb.group({firstName:["",s.required],lastName:["",s.required],email:["",[s.required,s.email]],password:["",s.required]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful!"),this.router.navigateByUrl("/account/login")},error:e=>this.validationErrors=e})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=d({type:t,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName","type","text"],["label","Last name","formControlName","lastName","type","text"],["label","Email","formControlName","email","type","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(i,n){i&1&&(o(0,"mat-card",0)(1,"form",1),h("ngSubmit",function(){return n.onSubmit()}),o(2,"div",2)(3,"h1",3),l(4,"Register"),a()(),f(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),p(9,it,4,0,"div",8),o(10,"button",9),l(11,"Sign in"),a()()()),i&2&&(r(),u("formGroup",n.registerForm),r(8),c(n.validationErrors?9:-1),r(),u("disabled",n.registerForm.invalid))},dependencies:[x,T,b,I,R,w,E,F,C],encapsulation:2})};var wt=[{path:"login",component:L},{path:"register",component:q}];export{wt as accountRoutes};
